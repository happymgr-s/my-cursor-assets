---
name: domain-modeling
description: 「目的指向」の思想の観点から、ドメインモデリングをするskill
---

# Skill: 目的指向ドメインモデリング (Purpose-Driven Domain Modeling)

## 概要

与えられた機能要望やアイデアから、システムの中核となるデータ構造を設計します。
単なるデータの入れ物を作るのではなく、「なぜそのデータが存在するのか」という目的と文脈を起点に、厳密な制約を持ったドメインモデル設計書を作成します。

## ⚠️ 根本思想と絶対ルール (Core Philosophy & Must Do)

- **「『それ』は『それ』単体で存在せず、背景・目的があって初めて『それ』として存在できる」** という目的指向の哲学を遵守すること。
- 単なる物理的な名詞（例：「User」「Article」）という単位で安易にモデリングすることを固く禁じます。
- 同じ物理的オブジェクトであっても、文脈や目的が異なれば別のモデルとして分離してください。（例：同じ人間でも、ログイン目的の `AuthUser` と、記事執筆目的の `Author` は分ける）
- ユーザーの入力から目的や背景が読み取れない場合は、推測でモデリングせず、必ず先に質問をして文脈を明確にすること。

## 実行ステップ

### Step 1: 文脈と目的の抽出 (Context & Purpose)

ユーザーの入力から、システム内で発生する「目的（やりたいこと）」を洗い出します。

- どのような背景・目的を達成するためにデータが必要か。
- その目的を達成するために、どのような振る舞い（アクション）が発生するか。

### Step 2: 目的ベースのモデル定義

Step 1 で特定した目的を達成するための「役割」としてモデルを定義します。

- 物理的な形にとらわれず、「その振る舞いを実行するための最小限のデータの集まり」を 1 つのモデルとします。
- モデル名には、その目的や状態が反映された名前を付けます。（例：ただの `Article` ではなく `DraftArticle` と `PublishedArticle` など）

### Step 3: プロパティと厳密な制約の定義

抽出したモデルに対し、その目的を果たすために必要不可欠なプロパティのみを定義します。

- その目的において不要なデータは一切含めないこと。
- 型、必須/任意、および取りうる値の厳密な制約（文字数、数値の範囲、特定のフォーマットなど）を定義します。

### Step 4: 状態遷移ルールの定義

そのモデルが目的を達成する過程で、どのように状態が変化するかを定義します。

- 許可される状態の遷移と、絶対に許可されない遷移を明確にします。

## 出力フォーマット

以下のフォーマットで「ドメインモデル設計書」を出力してください。

### 📊 ドメインモデル設計書

#### 1. モデル一覧と存在目的

_(各モデルが「なぜ存在するのか」の背景を必ず記載)_

- **[モデル名 A]** (例: Author)
  - 存在目的: ブログ記事を執筆し、公開を管理するため。
- **[モデル名 B]** (例: PublishedArticle)
  - 存在目的: 読者に対して完成したコンテンツを閲覧可能にするため。

#### 2. モデル詳細定義

_(各モデルについて以下の表を作成)_

**【モデル名: PublishedArticle】**
| プロパティ名 | 型 | 必須 | 制約 (バリデーション) | 備考 |
|---|---|---|---|---|
| (例) id | string | Yes | UUID 形式 | |
| (例) title | string | Yes | 1 文字以上、100 文字以内 | 下書きとは異なり空文字は許容しない |

#### 3. 状態遷移とビジネスルール

- [モデル名] が [ある状態] になるための条件。
- 許可される遷移: (例: `DraftArticle` はすべての必須項目が埋まった場合のみ `PublishedArticle` に変換できる)
